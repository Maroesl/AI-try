import{k as c,d as f,c as g,e as u,b as l,t as k,m,n as e,i as p,X as x,G as w,r as M,A as P,o as S,F as T,z as v,p as b}from"./index-CNFTjEvq.js";import{c as R,b as A,u as $,e as C,_ as U,f as z,g as D,h as B,i as _,j}from"./ModelDialog.vue_vue_type_script_setup_true_lang-BNN_6YCj.js";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=c("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=c("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Q={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},E={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col"},F={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},O={class:"text-lg font-semibold text-gray-900 dark:text-white"},V={class:"flex-1 overflow-y-auto p-4"},q=["value"],K={class:"flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700"},te=f({__name:"SystemPromptModal",props:{isOpen:{type:Boolean},modelValue:{},title:{}},emits:["close","update:modelValue","save"],setup(h,{emit:i}){const d=i,s=()=>{d("save"),d("close")};return(o,n)=>o.isOpen?(p(),g("div",Q,[l("div",E,[l("div",F,[l("h3",O,k(o.title||"系统提示词设置"),1),l("button",{onClick:n[0]||(n[0]=a=>o.$emit("close")),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[m(e(x),{class:"w-5 h-5"})])]),l("div",V,[n[3]||(n[3]=l("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-3"}," 设置系统提示词可以帮助AI更好地理解对话上下文，提供更准确的响应。 ",-1)),l("textarea",{value:o.modelValue,onInput:n[1]||(n[1]=a=>o.$emit("update:modelValue",a.target.value)),class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"8",placeholder:"例如：你是一个专业的编程助手，擅长解决代码问题和提供技术建议。"},null,40,q)]),l("div",K,[l("button",{onClick:n[2]||(n[2]=a=>o.$emit("close")),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," 取消 "),l("button",{onClick:s,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"}," 确定 ")])])])):u("",!0)}}),G={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},H={class:"bg-white rounded-lg max-w-4xl w-full h-[90vh] flex flex-col overflow-hidden"},I={class:"flex items-center justify-between p-6 border-b flex-shrink-0"},N={class:"flex items-center space-x-4"},L={class:"flex space-x-1"},X={class:"flex-1 overflow-y-auto p-6"},Z={class:"flex justify-end space-x-3 p-4 border-t bg-gray-50 flex-shrink-0"},oe=f({__name:"SettingsModal",setup(h){const i=w(),d=M("providers"),s=R(),o=A(),n=$(),a=C();return P(d,y=>{y==="prompts"&&i.openPromptEditor("system")}),S(()=>{i.loadSettings()}),(y,t)=>(p(),g(T,null,[m(U,{onOpen:t[0]||(t[0]=r=>e(i).showSettings=!0)}),e(i).showSettings?(p(),g("div",G,[l("div",H,[l("div",I,[l("div",N,[t[15]||(t[15]=l("h2",{class:"text-xl font-semibold"},"设置",-1)),l("div",L,[l("button",{onClick:t[1]||(t[1]=r=>d.value="providers"),class:b(["px-3 py-1 rounded text-sm font-medium transition-colors",d.value==="providers"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-800"])}," AI模型 ",2),l("button",{onClick:t[2]||(t[2]=r=>d.value="prompts"),class:b(["px-3 py-1 rounded text-sm font-medium transition-colors",d.value==="prompts"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-800"])}," 提示词规则 ",2)])]),l("button",{onClick:t[3]||(t[3]=r=>e(i).showSettings=!1),class:"p-1 hover:bg-gray-100 rounded"},[m(e(x),{class:"w-5 h-5"})])]),l("div",X,[d.value==="providers"?(p(),v(z,{key:0,providers:e(i).providers,"batch-testing-states":e(n).batchTestingStates.value,"testing-provider":e(n).testingProvider.value,onShowAddProviderType:t[4]||(t[4]=r=>e(s).showAddProviderTypeDialog.value=!0),onEditProvider:e(s).editProvider,onDeleteProvider:e(s).deleteProvider,onBatchTest:e(n).batchTestModels,onShowAddModel:e(o).showAddModel,onEditModel:e(o).editModel,onDeleteModel:e(o).deleteModel,onTestModel:e(n).handleModelTestClick,onSave:e(i).saveSettings,"get-default-base-url":e(s).getDefaultBaseUrl,"get-test-button-title":e(n).getTestButtonTitle,"get-batch-test-button-title":e(n).getBatchTestButtonTitle,"get-api-type-color":e(o).getApiTypeColor,"get-api-type-label":e(o).getApiTypeLabel},null,8,["providers","batch-testing-states","testing-provider","onEditProvider","onDeleteProvider","onBatchTest","onShowAddModel","onEditModel","onDeleteModel","onTestModel","onSave","get-default-base-url","get-test-button-title","get-batch-test-button-title","get-api-type-color","get-api-type-label"])):u("",!0),d.value==="prompts"?(p(),v(D,{key:1,onResetSystem:e(a).resetSystemPromptRules,onResetUser:e(a).resetUserPromptRules,onResetRequirement:e(a).resetRequirementReportRules,onResetThinking:e(a).resetThinkingPointsExtractionPrompt,onResetGeneration:e(a).resetSystemPromptGenerationPrompt,onResetAdvice:e(a).resetOptimizationAdvicePrompt,onResetApplication:e(a).resetOptimizationApplicationPrompt,onResetQualityAnalysisSystem:e(a).resetQualityAnalysisSystemPrompt,onResetUserPromptQualityAnalysis:e(a).resetUserPromptQualityAnalysis,onResetUserPromptQuickOptimization:e(a).resetUserPromptQuickOptimization,onToggleSlimRules:e(a).handleSlimRulesToggle},null,8,["onResetSystem","onResetUser","onResetRequirement","onResetThinking","onResetGeneration","onResetAdvice","onResetApplication","onResetQualityAnalysisSystem","onResetUserPromptQualityAnalysis","onResetUserPromptQuickOptimization","onToggleSlimRules"])):u("",!0)]),l("div",Z,[l("button",{onClick:t[5]||(t[5]=r=>e(i).showSettings=!1),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"}," 取消 "),l("button",{onClick:t[6]||(t[6]=(...r)=>e(a).saveAndClose&&e(a).saveAndClose(...r)),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," 保存设置 ")])])])):u("",!0),e(s).showAddProviderTypeDialog.value?(p(),v(B,{key:1,onSelect:e(s).selectProviderType,onClose:t[7]||(t[7]=r=>e(s).showAddProviderTypeDialog.value=!1)},null,8,["onSelect"])):u("",!0),e(s).showAddProvider.value?(p(),v(_,{key:2,editing:!!e(s).editingProvider.value,"provider-type":e(s).selectedProviderType.value,name:e(s).newProvider.value.name,"onUpdate:name":t[8]||(t[8]=r=>e(s).newProvider.value.name=r),"base-url":e(s).newProvider.value.baseUrl,"onUpdate:baseUrl":t[9]||(t[9]=r=>e(s).newProvider.value.baseUrl=r),"api-key":e(s).newProvider.value.apiKey,"onUpdate:apiKey":t[10]||(t[10]=r=>e(s).newProvider.value.apiKey=r),"get-default-base-url":e(s).getDefaultBaseUrl,"get-provider-template":e(s).getProviderTemplate,onSave:e(s).saveProvider,onClose:e(s).closeProviderDialog},null,8,["editing","provider-type","name","base-url","api-key","get-default-base-url","get-provider-template","onSave","onClose"])):u("",!0),e(o).showAddModelDialog.value?(p(),v(j,{key:3,editing:!!e(o).editingModel.value,provider:e(o).getProviderForModel(e(o).addingModelToProvider.value),name:e(o).newModel.value.name,"onUpdate:name":t[11]||(t[11]=r=>e(o).newModel.value.name=r),id:e(o).newModel.value.id,"onUpdate:id":t[12]||(t[12]=r=>e(o).newModel.value.id=r),"api-type":e(o).newModel.value.apiType,"onUpdate:apiType":t[13]||(t[13]=r=>e(o).newModel.value.apiType=r),"search-keyword":e(o).modelSearchKeyword.value,"onUpdate:searchKeyword":t[14]||(t[14]=r=>e(o).modelSearchKeyword.value=r),"available-models":e(o).getCurrentProviderModels.value,loading:e(o).loadingModels.value,error:e(o).modelFetchError.value,onFetchModels:e(o).fetchAvailableModels,onSelectModel:e(o).selectModel,onSave:e(o).addCustomModel,onClose:e(o).closeAddModelDialog},null,8,["editing","provider","name","id","api-type","search-keyword","available-models","loading","error","onFetchModels","onSelectModel","onSave","onClose"])):u("",!0)],64))}});export{Y as F,ee as S,te as _,oe as a};
