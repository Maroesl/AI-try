import{d as _,u as v,r as l,o as h,c as r,b as s,e as f,t as g,j as k,a as b,i as c,_ as x}from"./index-CNFTjEvq.js";const y={class:"callback-container"},m={class:"callback-card"},w={key:0,class:"processing-state"},C={key:1,class:"error-state"},A={class:"error-message"},B=_({__name:"AuthCallback",setup(S){const n=b(),i=k(),u=v(),a=l(!0),e=l(""),d=async()=>{try{const t=i.query.code;if(!t){e.value="未获取到授权码，请重新登录",a.value=!1;return}await u.loginWithLinuxDo(t)?n.push("/"):(e.value="登录失败，请重试",a.value=!1)}catch(t){console.error("OAuth callback error:",t),e.value="登录过程中发生错误，请重试",a.value=!1}},p=()=>{n.push("/login")};return h(()=>{d()}),(t,o)=>(c(),r("div",y,[s("div",m,[a.value?(c(),r("div",w,[...o[0]||(o[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",{class:"status-text"},"正在处理登录...",-1)])])):e.value?(c(),r("div",C,[o[1]||(o[1]=s("svg",{class:"error-icon",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),s("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),s("p",A,g(e.value),1),s("button",{onClick:p,class:"btn btn-primary"},"返回登录")])):f("",!0)])]))}}),L=x(B,[["__scopeId","data-v-dbbff679"]]);export{L as default};
